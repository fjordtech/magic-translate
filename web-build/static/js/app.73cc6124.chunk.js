(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{154:function(e,t,n){e.exports=n.p+"static/media/magic-logo.bbd998c7.png"},165:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n.n(a),i=n(49),o=n(166),s=n(8);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=l(l({},i.a),{},{roundness:2,version:3,colors:l(l({},i.a.colors),{},{primary:"#3498db",secondary:"#f1c40f",tertiary:"#a1b2c3"})}),p=function(e){var t=e.children;return Object(s.jsx)(o.a,{theme:d,children:t})},m=n(15),b=n.n(m),f=n(239),j=n(113),x=n(29),h=n(6),g=n.n(h),O=n(164),y=n(71),v=n(163),w=n(60),C=n(160),S=n(1),P=n(3),k=n(40),_=n(152),I=n.n(_).a.create({baseURL:"https://api.scryfall.com"}),T=n(30),z=n.n(T),B=n(105),D=function(e,t){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(B.a.setItem(e,JSON.stringify(t)));case 3:return n.abrupt("return",!0);case 6:return n.prev=6,n.t0=n.catch(0),n.abrupt("return",!1);case 9:case"end":return n.stop()}}),null,null,[[0,6]],Promise)},A=function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(B.a.getItem(e));case 3:if(null===(t=n.sent)){n.next=6;break}return n.abrupt("return",JSON.parse(t));case 6:n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",!1);case 11:case"end":return n.stop()}}),null,null,[[0,8]],Promise)},E="@MAGIC_T:cards",L=function(e){var t,n,r;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(A(E));case 2:if(!(t=a.sent)){a.next=16;break}if(n=t.findIndex((function(t){return t.name==e.name})),r=z()(t),-1===n){a.next=12;break}return r[n]=e,a.next=10,g.a.awrap(D(E,t));case 10:a.next=14;break;case 12:return a.next=14,g.a.awrap(D(E,[].concat(z()(t),[e])));case 14:a.next=18;break;case 16:return a.next=18,g.a.awrap(D(E,[e]));case 18:case"end":return a.stop()}}),null,null,null,Promise)},J=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(A(E));case 2:if(!(e=t.sent)){t.next=7;break}return t.abrupt("return",e);case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}}),null,null,null,Promise)},N=n(154),R=n.n(N);function V(){var e=Object(r.useState)(""),t=b()(e,2),n=t[0],a=t[1],c=Object(r.useState)({printed_text:"",image_uris:{normal:null}}),i=b()(c,2),o=i[0],u=i[1],l=Object(r.useState)(!1),d=b()(l,2),p=d[0],m=d[1],f=Object(r.useState)(!1),j=b()(f,2),x=j[0],h=j[1];return Object(s.jsxs)(P.a,{style:H.container,children:[Object(s.jsxs)(P.a,{style:H.imageContainer,children:[Object(s.jsx)(k.a,{source:R.a,style:H.image}),Object(s.jsx)(v.a,{label:"Nome da Carta",style:H.input,value:n,onChangeText:a,placeholder:"Digite o nome da carta..."}),Object(s.jsxs)(P.a,{style:H.groupButtons,children:[Object(s.jsx)(y.a,{icon:"magnify",mode:"contained",onPress:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.trim()&&!x){e.next=2;break}return e.abrupt("return");case 2:h(!0),I.get("/cards/search",{params:{q:n+" lang:pt"}}).then((function(e){var t,r=e.data,a=b()(r.data,1)[0];if(a&&null!=(t=a)&&t.printed_text){if(a.card_faces){var c=b()(a.card_faces,1)[0];if(!c)return void u({printed_text:"Algo deu errado! Tente novamente.",image_uris:{normal:null}});a=c}u(a),L({name:n+" / "+a.printed_name,image:a.image_uris.normal,text:a.printed_text})}else u({printed_text:"Carta sem tradu\xe7\xe3o pt-BR.",image_uris:{normal:null}})})).catch((function(e){var t="Algo deu errado! Tente novamente.";e.response&&(404===e.response.status&&(t="Carta n\xe3o encontrada! Tente novamente."));u({printed_text:t,image_uris:{normal:null}})})).finally((function(){return h(!1)}));case 4:case"end":return e.stop()}}),null,null,null,Promise)},loading:x,children:"Buscar"}),Object(s.jsx)(y.a,{style:{marginLeft:10},icon:"image-area",mode:"contained",onPress:function(){o.image_uris.normal&&m(!p)},children:p?"Ver Texto":"Ver Imagem"})]})]}),p?Object(s.jsx)(k.a,{source:{uri:o.image_uris.normal},style:H.cardImage}):!!o.printed_text&&Object(s.jsx)(w.a,{style:{maxHeight:200},elevation:3,mode:"elevated",children:Object(s.jsx)(w.a.Content,{children:Object(s.jsx)(C.a,{children:o.printed_text})})}),Object(s.jsx)(O.a,{style:"auto"})]})}var H=S.a.create({container:{flex:1,padding:20,paddingTop:40,backgroundColor:"#eee",alignItems:"center",justifyContent:"flex-start"},imageContainer:{alignItems:"center",justifyContent:"center",marginBottom:20,width:"100%",backgroundColor:"#eee"},input:{margin:12,marginTop:50,width:"80%"},image:{padding:10,width:"100%",height:120},cardImage:{width:223,height:310,borderColor:"#000",borderWidth:2,borderRadius:10},groupButtons:{flexDirection:"row"}}),M=n(99),W=n(102),G=n(168),q=n(169),U=n(167),F=function(e){var t=Object(r.useState)(!1),n=b()(t,2),a=n[0],c=n[1],i=Object(r.useState)(),o=b()(i,2),u=o[0],l=o[1],d=Object(r.useState)([]),m=b()(d,2),j=m[0],h=m[1],O=Object(r.useState)(!1),v=b()(O,2),C=v[0],S=v[1],_=Object(r.useState)(!1),I=b()(_,2),T=I[0],z=I[1];Object(r.useEffect)((function(){return J().then((function(e){h(e),e.length&&z(!0)})),function(){S(!1),z(!1)}}),[e]);var L=function(){c(!a)},N=function(e){(function(e){var t,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(A(E));case 2:return t=r.sent,n=t.filter((function(t){return t.name!==e.name})),r.next=6,g.a.awrap(D(E,n));case 6:return r.next=8,g.a.awrap(J());case 8:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}}),null,null,null,Promise)})(e).then((function(e){return h(e)}))};return Object(s.jsx)(p,{children:Object(s.jsxs)(M.a,{style:{flex:1},children:[Object(s.jsxs)(G.a,{children:[Object(s.jsx)(q.a,{visible:a,onDismiss:L,children:Object(s.jsx)(w.a,{style:K.containerCard,children:Object(s.jsx)(k.a,{source:{uri:null==u?void 0:u.image},style:K.image,resizeMode:"contain"})})}),Object(s.jsx)(U.a.Group,{visible:T,open:C,icon:C?"alert-outline":"delete",actions:[{icon:"check-bold",label:"Limpar tudo",onPress:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.awrap(B.a.clear());case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),null,null,[[0,6]],Promise));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,null,null,Promise));case 2:h([]),z(!1);case 4:case"end":return e.stop()}}),null,null,null,Promise)}}],onStateChange:function(e){var t=e.open;return S(t)}})]}),Object(s.jsx)(W.a,{contentContainerStyle:K.container,showsVerticalScrollIndicator:!1,data:j,keyExtractor:function(e){return e.name},ListEmptyComponent:Object(s.jsxs)(P.a,{style:K.emptyContent,children:[Object(s.jsx)(f.a,{name:"sad-outline",size:42,color:"#838383"}),Object(s.jsx)(x.a,{style:K.emptyText,children:"N\xe3o h\xe1 hist\xf3rico de tradu\xe7\xe3o."})]}),renderItem:function(e){var t=e.item;return Object(s.jsxs)(P.a,{style:K.item,children:[Object(s.jsxs)(P.a,{style:K.info,children:[Object(s.jsx)(x.a,{style:K.name,children:t.name}),Object(s.jsx)(x.a,{children:t.text})]}),Object(s.jsxs)(P.a,{children:[Object(s.jsx)(y.a,{style:{marginBottom:10},mode:"contained",onPress:function(){return l(t),void L()},children:Object(s.jsx)(f.a,{name:"image-outline",size:24,color:"black"})}),Object(s.jsx)(y.a,{mode:"contained",onPress:function(){return N(t)},children:Object(s.jsx)(f.a,{name:"trash-outline",size:24,color:"black"})})]})]})}})]})})},K=S.a.create({container:{padding:20,paddingTop:40,flex:1},containerCard:{padding:10},item:{flexDirection:"row",alignItems:"center",paddingVertical:10,borderBottomWidth:1,borderBottomColor:"#838383"},info:{flex:1,marginRight:10},name:{fontSize:18,textTransform:"capitalize",fontWeight:"bold",marginBottom:5},image:{width:"100%",height:500},fab:{position:"absolute",margin:16,right:0,bottom:0},emptyText:{color:"#838383",textAlign:"center",fontSize:16},emptyContent:{flex:1,justifyContent:"center",alignItems:"center"}}),Q=function(){var e=Object(r.useState)(0),t=b()(e,2),n=t[0],a=t[1],c=j.a.SceneMap({home:V,"list-circle":F});return Object(s.jsx)(j.a,{sceneAnimationEnabled:!0,renderIcon:function(e){var t=e.route,n=e.color,r=e.focused;return Object(s.jsx)(f.a,{name:r?t.key:t.key+"-outline",size:24,color:n})},renderLabel:function(e){var t=e.route;return Object(s.jsx)(x.a,{style:{fontSize:12,textAlign:"center"},children:t.title})},navigationState:{index:n,routes:[{key:"home",title:"Home"},{key:"list-circle",title:"Hist\xf3rico"}]},onIndexChange:a,renderScene:c})};t.a=function(){return Object(s.jsx)(p,{children:Object(s.jsx)(Q,{})})}},171:function(e,t,n){e.exports=n(232)}},[[171,1,2]]]);
//# sourceMappingURL=app.73cc6124.chunk.js.map